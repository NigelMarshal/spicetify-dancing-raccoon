!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e;e=async function(){await t()},(async()=>{await e()})();async function t(){var e,t,a;try{var n=await async function(t,a,n){for(let e=0;e<a;e++){var i=document.querySelector(t);if(i)return i;await new Promise(e=>setTimeout(e,n))}throw new Error(`Element ${t} not found after ${a} attempts.`)}(".main-nowPlayingWidget-coverArt",50,100),i=(t="https://github.com/NigelMarshal/spicetify-dancing-raccoon/raw/main/src/video/pedro-raccoon.webm",(e=n).innerHTML="",e.style.backgroundColor="black",e.style.width="100px",e.style.height="80px",(a=document.createElement("video")).id="dancing-raccoon",a.loop=!0,a.muted=!0,a.style.cssText="width: 100%; height: 85px;",a.src=t,e.appendChild(a),a);function r(){Spicetify.Player.isPlaying()?i.play():i.pause()}async function o(){var e=await async function(t=200,a=5){for(;0<a;)try{return await Spicetify.getAudioData()}catch(e){a--,console.error("Failed to fetch audio data. Retrying...",e),await new Promise(e=>setTimeout(e,t))}return console.error("Data fetching failed after multiple attempts."),null}();i.playbackRate=await((e=e)&&e.track&&e.track.tempo?(e=e.track.tempo,console.info("Current track BPM:",e),e/151):(console.error("Could not calculate playback rate. Using default playback rate."),1)),r()}r(),Spicetify.Player.removeEventListener("onplaypause",r),Spicetify.Player.addEventListener("onplaypause",r),Spicetify.Player.removeEventListener("songchange",o),Spicetify.Player.addEventListener("songchange",o)}catch(e){console.error("Video injection failed:",e)}}}();